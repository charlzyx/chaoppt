---
layout: minimal
authors:
  - "[charlzyx](https://github.com/charlzyx)"
---

# 0x00 æµç•…çš„ TypeScript - å¼€ç¯‡<å…¨é›†ä¸­Â·æ°´ä¹‹å‘¼å¸>

::authors

TypeScript ä¸­çš„ç±»å‹å¯ä»¥åƒå‡½æ•°ä¸€æ ·è¢«å¼•ç”¨ï¼Œè®¡ç®—ï¼Œæ¨å¯¼ï¼Œå˜æ¢ä¸ºå¦ä¸€ç§ç±»å‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæµåŠ¨çš„å¼ºç±»å‹ã€‚


ä¸åŒäº Java ç­‰å…¶ä»–è¿™ç§å¼ºç±»å‹è¯­è¨€ï¼ŒTypeScript æœ‰ä¸€å¤§ä¼˜åŠ¿åœ¨äºå®ƒå¯ä»¥è¿›è¡Œå¯ç±»å‹æ¨æ–­ï¼Œè€Œä¸”ä¸æ˜¯ rust ä¹‹ç±»ç°ä»£åŒ–è¯­è¨€çš„å¯çœç•¥ç±»å‹æ ‡æ³¨ï¼Œè€Œæ˜¯å¯æ§çš„ç±»å‹æ¨æ–­ã€‚

![breath_of_water](https://r2.charlzyx.xyz/0x00%2F0x00_breath_of_water.jpg)

> ç»“ç»³ä½“ç°äº†æ—¶é—´çš„æµåŠ¨ï¼Œå°†ä¸çº¿æ±‡èšåœ¨ä¸€èµ·ç¼–ç»‡æˆå‹ã€æ‰­æ›²ã€ç¼ ç»•ï¼Œæœ‰æ—¶åˆè¿˜åŸã€æ–­è£‚ï¼Œå†æ¬¡è¿æ¥ï¼Œé‚£å°±æ˜¯æ—¶é—´ã€‚ --å›ã®åã¯ã€‚

![whats_your_name](https://r2.charlzyx.xyz/0x00%2F0x00_your_name.jpg)

### å†™åœ¨å‰é¢

è¿™ä¸ªçŸ­ç¯‡æ—¢ä¸æ˜¯ TypeScript åŸºç¡€æŒ‡å—, ä¹Ÿä¸æ˜¯ TypeScript ä½“æ“åˆ†æ; 

> å¯èƒ½ä½ éœ€è¦çš„æ˜¯: 
- [TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/intro.html)
- [Type<Challenge[]>](https://github.com/type-challenges/type-challenges/blob/main/README.zh-CN.md)
- [TypeScript å…¥é—¨æ•™ç¨‹](https://github.com/xcatliu/typescript-tutorial)
- [TypeScript Deep Dive](https://github.com/jkchao/typescript-book-chinese)

æœ¬æ–‡æ—¨åœ¨ä»ç±»å‹æµåŠ¨çš„è§’åº¦å‡ºå‘ï¼Œé€šè¿‡ä¸€ç³»åˆ—ç®€çŸ­çš„åº”ç”¨åœºæ™¯ï¼Œè®²è§£ä¸€äº›å·¥å…·ç±»å‹çš„ä½¿ç”¨åœºæ™¯ï¼Œå‡å°‘ TypeScript ç±»å‹å­¦ä¹ è¿‡ç¨‹ä¸­é€ æˆçš„å¼ºçƒˆæŒ«è´¥æ„Ÿï¼Œå›å½’ JavaScript çš„æµç•…ã€‚
ä»¥åŠ, ç†è§£æµåŠ¨çš„å“²å­¦ã€‚

> Be Water, My Friend. --æå°é¾

![be_water](https://r2.charlzyx.xyz/0x00%2F0x00_bruce_lee.jpg)

### é£èµ·äºé’èä¹‹æœ«

è®©æˆ‘ä»¬å…ˆä»ä¸€ä¸ªæœ€ç®€å•åœºæ™¯å¼€å§‹, é’ˆå¯¹ç”¨æˆ·(User) çš„ CRUD çš„åŸºæœ¬ç±»å‹å®šä¹‰;

> æŠŠé¼ æ ‡ ğŸ–± æ”¾åˆ° console.log é‡Œé¢çš„å˜é‡ä¸Š, å¯ä»¥æŸ¥çœ‹ç±»å‹å“¦

```ts twoslash
// ---cut---
type Resp<T> = any;
// ---cut---
type User = { id: number; name: string; tag: string; };
type List = (query: { id?: number; name?: string; tag?: string; }) => Resp<User[]>;
type Detail = (id?: number) => Resp<User>;
type Create = (neo: { name: string; tag?: string }) => Resp<number>;
type Remove = (id: number) => Resp<boolean>;

const CRUD: { list: List; detail: Detail; create: Create; remove: Remove; } = {
  list: (query) => console.log(query.id, query.name, query.tag),  // ğŸ–± 
  detail: (id) => console.log(id), // ğŸ–±
  create: (part) => console.log(part.name, part.tag), // ğŸ–±
  remove: (id) => console.log(id), // ğŸ–±
};
```

å¯ä»¥çœ‹åˆ°, å°½ç®¡æˆ‘ä»¬å·²ç»**é‡å¤ä½¿ç”¨ User** æ¥å‡å°‘ç±»å‹å®šä¹‰çš„ç¼–å†™, ä½† { id, name, tag } è¿™äº›å­—æ®µä»ç„¶é‡å¤å‡ºç°äº†å¾ˆå¤šæ¬¡, æœ‰äº›æ˜¯æ¯«æ— å˜åŒ–, æœ‰äº›åªæ˜¯å°†å¿…é€‰å˜æˆäº†éå¿…é€‰;
é™¤äº†ç¼–å†™è´¹æ—¶è´¹åŠ›ä¹‹å¤–, ç‰¹åˆ«çš„, å½“æˆ‘ä»¬å­—æ®µå‘ç”Ÿå˜æ›´çš„æ—¶å€™, æ¯”å¦‚ id -> useId, å°±éœ€è¦å¯¹æ‰€æœ‰åœ°æ–¹è¿›è¡Œè°ƒæ•´;

æˆ–è€…æˆ‘ä»¬åšä¸€ä¸‹æ”¹åŠ¨

```diff
- type List = (query: { id?: number; name?: string; tag?: string; }) => Resp<User[]>;
+ type List = (query: Partial<User>) => Resp<User[]>;
- type Detail = (id?: number) => Resp<User>;
+ type Detail = (id?: User["id"]) => Resp<User>;
- type Create = (neo: { name: string; tag?: string }) => Resp<number>;
+ type Create = (neo: Omit<User, "id">) => Resp<User["id"]>;
- type Remove = (id: number) => Resp<boolean>;
+ type Remove = (id: User["id"]) => Resp<boolean>;
```

æŠŠä»£ç å˜æˆè¿™æ ·

```ts twoslash
// ---cut---
type Resp<T> = any;
// ---cut---
type User = { id: number; name: string; tag: string; };
type List = (query: Partial<User>) => Resp<User[]>;
type Detail = (id?: User["id"]) => Resp<User>;
type Create = (neo: Omit<User, "id">) => Resp<User["id"]>;
type Remove = (id: User["id"]) => Resp<boolean>;

const CRUD: { list: List; detail: Detail; create: Create; remove: Remove; } = {
  list: (query) => console.log(query.id, query.name, query.tag),  // ğŸ–± 
  detail: (id) => console.log(id), // ğŸ–±
  create: (part) => console.log(part.name, part.tag), // ğŸ–±
  remove: (id) => console.log(id), // ğŸ–±
};
```

å¯ä»¥çœ‹åˆ° console.log ä¸­çš„å˜é‡ç±»å‹, **ç¥ç§˜çš„å®Œå…¨ä¸€è‡´!**, å¾ˆç®€å•ä¸æ˜¯å—,æˆ‘ä»¬åªç”¨äº†ä¸‰ä¸ªæœ€åŸºæœ¬çš„æ–¹æ³•, å°±è®©ç±»å‹äº§ç”Ÿäº†**æµåŠ¨**! 

> åœ¨ä¸Šè¿°ä¾‹å­ä¸­, æˆ‘ä»¬ç”¨åˆ°äº†ä»¥ä¸‹å‡ ä¸ªç±»å‹çš„å¼•ç”¨æ–¹å¼

- **å¼•ç”¨** [`Type<"Index">`](https://www.typescriptlang.org/docs/handbook/2/indexed-access-types.html) å°†å¦ä¸€ç§ç±»å‹ä¸ŠæŸ¥æ‰¾ç‰¹å®šå±æ€§çš„ç±»å‹
- **è½¬æ¢** [`Partial<Type>`](https://www.typescriptlang.org/docs/handbook/utility-types.html#partialtype) å°†ç±»å‹çš„æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰(Optional)
- **è½¬æ¢** [`Omit<Type, Keys>`](https://www.typescriptlang.org/docs/handbook/utility-types.html#omittype-keys) é€šè¿‡ä» Type ä¸­é€‰æ‹©æ‰€æœ‰å±æ€§ç„¶ååˆ é™¤ Keys (å¹¶é›†) æ¥æ„é€ ç±»å‹

é™¤äº†å‡å°‘å­—æ®µçš„æ‹¼å†™ä¹‹å¤–, æˆ‘ä»¬è¿˜é¢å¤–è¾¾æˆäº†

1. `type Create = (neo: Omit<User, "id">) => Resp<User["id"]>;` è¯­ä¹‰æ˜ç¡®, ç°åœ¨æˆ‘ä»¬çŸ¥é“ Create ä¼šè¿”å›çš„æ˜¯ç”¨æˆ·çš„ id
2. è”åŠ¨ä¿®æ”¹, å°† User ä¸Š id å±æ€§ä» number è°ƒæ•´ä¸º  `string`, åªéœ€è¦ä¿®æ”¹ä¸€å¤„ä»£ç !
3. æ”¹åŠ¨è­¦å‘Š, å°† User ä¸Šçš„ id å±æ€§åå­—è°ƒæ•´ä¸º `userId`, æˆ‘ä»¬å°†ä¼šåœ¨æ‰€æœ‰éœ€è¦ä¿®æ”¹çš„åœ°æ–¹çœ‹åˆ°æŠ¥é”™! å°±åƒè¿™æ ·

```ts twoslash
// @errors: 2339 2322
// ---cut---
type Resp<T> = any;
// ---cut---
type User = { userId: number; name: string; tag: string; };
type List = (query: Partial<User>) => Resp<User[]>;
type Detail = (id?: User["id"]) => Resp<User>;
type Create = (neo: Omit<User, "id">) => Resp<User["id"]>;
type Remove = (id: User["id"]) => Resp<boolean>;

const CRUD: { list: List; detail: Detail; create: Create; remove: Remove; } = {
  list: (query) => console.log(query.id, query.name, query.tag),  // ğŸ–± 
  detail: (id) => console.log(id), // ğŸ–±
  create: (part) => console.log(part.name, part.tag), // ğŸ–±
  remove: (id) => console.log(id), // ğŸ–±
};
```


### å°ç»“

è¿™ä¸ªç®€å•çš„ä¾‹å­åº”è¯¥å·²ç»èƒ½ç†è§£äº† TypeScript ç±»å‹æµåŠ¨çš„æ„ä¹‰, ä»¥åŠåœ¨å®é™…çš„åœºæ™¯ä¸­çš„å®ç”¨ä»·å€¼, åç»­æˆ‘ä»¬å°†ç»§ç»­ç»“åˆä¾‹å­, è®²è¿°ä¸€äº›å¸¸ç”¨çš„ç‰¹æ€§.

ç¥ Happy Typing ğŸ‰